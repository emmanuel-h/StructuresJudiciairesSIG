<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>SIG</title>

    <style type="text/css">
      html, body, .map {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
      }
    </style>

    <script src ='Openlayers/ol.js' type="text/javascript"></script>
    <script src='mobileTest.js' type='text/javascript'></script>

  </head>
  <body>

    <div id="map" class="map">

    </div>

    <script>
        afficherMap('%LONGITUDE%','%LATITUDE%');
    </script>

    <!--
    <script>
      var map = new ol.Map({
        layers: [
          new ol.layer.Tile({
            /*extent: ol.proj.transformExtent([-74.3053,40.4927,-73.6379,40.9444],'EPSG:4326','EPSG:3857'),*/
            source: new ol.source.OSM()
          })
        ],
        target: 'map',
        view: new ol.View({
          center: ol.proj.transform(
            [-73.9716,40.7185], 'EPSG:4326','EPSG:3857'),
          zoom: 11
        })
      });
      var neighborhoods = new ol.layer.Tile({
        source: new ol.source.TileWMS(({
          url: 'http://192.168.1.38:8080/geoserver/benito/wms',
          params: {'LAYERS': 'benito:nyc_neighborhoods_stylay'},
          serverType: 'geoserver'
        }))
      });
      map.addLayer(neighborhoods);

      var subway_stations = new ol.layer.Vector({
      source: new ol.source.Vector({
      url: 'http://192.168.1.38:8080/geoserver/benito/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=benito:nyc_subway_stations&maxFeatures=500&outputFormat=application%2Fjson&srsname=EPSG:4326',
      format: new ol.format.GeoJSON()
      })
      });
      map.addLayer(subway_stations);

      var neighborhoodsButton = document.getElementById('neighborhoodsButton');
      var isNeighborhoodsVisible = true;
      neighborhoodsButton.addEventListener('click', function(){
      	if(isNeighborhoodsVisible){
      		neighborhoods.setVisible(false);
      		isNeighborhoodsVisible = false;
      	}else{
      		neighborhoods.setVisible(true);
      		isNeighborhoodsVisible = true;
      	}
      }, false);
    </script>
    -->
  </body>
</html>
